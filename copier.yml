# CONFIGURATION -------------------------
_subdirectory: project_template
_templates_suffix: ""
_skip_if_exists:
  - CHANGELOG.md

# PROMPT --------------------------------
project_name:
  type: str
  help: Please provide the name of your project (do not use spaces).
  validator: >-
    {% if not project_name %} You must provide a name for the project. {% endif
    %}

host:
  type: str
  help: Where would you like to host your code?
  choices:
    - gitlab.ewi.tudelft.nl
    - gitlab.tudelft.nl
    - github.com

org:
  type: str
  help: What {{host}} user is this project under? For gitlab, this is your netid or group.
  validator: >-
    {% if not org %} You must provide a org for the project. It might just be
    your user name on the site (like GitHub) you are targeting. {% endif %}

url:
  type: str
  help: Provide/modify the url to the {{host}} repository if needed.
  default: https://{{host}}/{{org}}/{{project_name}}
    

python_name:
  type: str
  help: The Python package import name (for `import NAME` in Python code)
  default: "{{ project_name|lower|replace('-', '_')|replace(' ', '_') }}"

full_name:
  type: str
  help: Who's the main responsible for this code?
  placeholder: My Name
  validator: >-
    {% if not full_name %} You must provide a name (possibly yours) to place in
    your config files. {% endif %}

email:
  type: str
  help: What's their email?
  placeholder: email@tudelft.nl
  validator: >-
    {% if not (email | regex_search('^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$')) %}
    You must provide a valid email to place in
    your config files.
    {% endif %}

project_short_description:
  type: str
  help: Write a short description of your project.
  default: A great package.

license:
  type: str
  help: Select a license
  choices:
    - GPL
    - BSD
    - Apache
    - MIT

min_python_version:
  type: str
  help: What is the minimum version of Python your project will support? (Defaults to minimum supported by NumPy)
  default: "3.10"
  validator: >-
    {% if not (min_python_version | regex_search('[3][.][0-9]+')) %}
    Please supply a valid Python 3 version (e.g. 3.11).
    {% endif %}

environment_manager:
  type: str
  help: Select which virtual environment manager to use. Choose uv unless you need conda dependencies.
  choices:
    "uv   (pip dependencies only)": uv
    "pixi (conda and pip dependencies)": pixi

typing:
  type: str
  help: Would you like to use static type checking? (This configures mypy.)
  choices:
    "No/I'll configure it myself.": no_typing
    "Basic type checking (type annotations not required).": loose
    "Full type checking (type annotations required).": strict

coc:
  type: str
  help: We provide a basic Code of Conduct that can be modified to suit the needs of your project. Would you like to use this, or write your own?
  choices:
    "I'll use/modify the basic Code of Conduct.": our_coc
    "I'll write my own Code of Conduct.": their_coc

_message_after_copy: |
    Your project "{{ project_name }}" has been successfully created in {{ _copier_conf.dst_path }} folder!

        Next steps:

            - Below are the commands to put your Python package under using git:

                cd {{ _copier_conf.dst_path }}
                git init
                git add --all
                git commit -m "first commit"
                git branch -M main
                git remote add origin {{ url }}.git

            - Push the initial commit to a new repo on {{host}}

                Go to {% if host=='github.com' %}https://github.com/new{% else %}https://{{host}}/projects/new{% endif %}                
                and create a new repository named `{{ project_name }}` as an empty repository, then push your commits to {{host}}:

                git push --set-upstream origin main

            - Create a new virtual environment, install the dependencies and your project in editable mode
                {% if environment_manager=='uv' %}
                uv sync 
                {%- elif environment_manager=='pixi' %}
                pixi init # Answer yes when asked to use the pyproject.toml
                pixi install --all
                {% endif %}

            - Install the pre-commit hook
                {% if environment_manager=='uv' %}
                uv run pre-commit install
                {%- elif environment_manager=='pixi' %}
                pixi run --environment dev pre-commit install
                {% endif %}
              