test_project_generation:
  stage: test
  before_script:
    - uv venv
    - uv tool install copier --with jinja2-shell-extension
  script:
      - copier copy \
        -d coc=our_coc \
        -d email=email@tudelft.nl \
        -d environment_manager=uv \
        -d full_name="A Name" \
        -d host=gitlab.ewi.tudelft.nl \
        -d license=GPL \
        -d min_python_version='3.10' \
        -d org=reit \
        -d project_name=python-template-uv-example \
        -d project_short_description="A python template uv example." \
        -d python_name=python_template_uv_example \
        -d typing=no_typing \
        -d url=https://gitlab.ewi.tudelft.nl/reit/python-template-uv-example \
        --trust \
        --vcs-ref HEAD \
        . python-template-uv-example
      - cd python-template-uv-example \
        uv run pytest

test_pre_commit:
  stage: test
  before_script:
    - uv venv
    - uv pip install pre-commit
  script:
    - uv run
