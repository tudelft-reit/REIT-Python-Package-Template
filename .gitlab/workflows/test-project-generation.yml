test_project_generation:
  stage: test
  before_script:
    - uv venv
    - uv tool install copier --with jinja2-shell-extension
  script:
      - export PATH="/root/.local/bin:$PATH"
      - git config --global user.name "Python Template"
      - git config --global user.email "pyton-template@tudelft.nl"
      - >
          copier copy
          --defaults
          --trust
          --vcs-ref HEAD
          -d project_name=python-template-uv-example
          . python-template-uv-example
      - cd python-template-uv-example
      - uv run pytest

test_pre_commit:
  stage: test
  before_script:
    - uv venv
    - uv pip install pre-commit
  script:
    - uv run pre-commit run --all
